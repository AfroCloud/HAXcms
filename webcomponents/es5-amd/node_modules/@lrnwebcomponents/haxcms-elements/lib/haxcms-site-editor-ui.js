define(["../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/iron-icons/editor-icons.js","../../../@polymer/paper-tooltip/paper-tooltip.js","../../../@polymer/paper-fab/paper-fab.js","../../../@polymer/app-layout/app-header/app-header.js","../../../@polymer/app-layout/app-toolbar/app-toolbar.js","./haxcms-outline-editor-dialog.js","./haxcms-manifest-editor-dialog.js"],function(_polymerLegacy){"use strict";function _templateObject_79aaaa50152211e9ab85edf03c468fa7(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style is=\"custom-style\">\n      :host {\n        display: block;\n      }\n      paper-fab {\n        margin: 16px;\n        padding: 2px;\n        width: 40px;\n        height: 40px;\n        z-index: 1000;\n        background-color: var(--haxcms-color, #ff4081);\n        transition: all 0.6s linear;\n      }\n      #editbutton,\n      #deletebutton {\n        visibility: hidden;\n        opacity: 0;\n      }\n      :host([page-allowed]) #editbutton,\n      :host([page-allowed]) #deletebutton {\n        visibility: visible;\n        opacity: 1;\n      }\n      :host([edit-mode]) #editbutton {\n        width: 100%;\n        z-index: 1001;\n        border-radius: 0;\n        height: 64px;\n        margin: 0;\n        padding: 8px;\n        background-color: var(--paper-blue-500) !important;\n        position: absolute;\n      }\n      app-header {\n        opacity: 0.5;\n        position: fixed;\n        right: 0;\n        bottom: 0;\n        background-color: pink;\n        color: black;\n        margin: 0;\n        padding: 0;\n        transition: all 0.6s linear;\n      }\n      app-header:hover,\n      app-header:active,\n      app-header:focus {\n        opacity: 1;\n      }\n      app-toolbar {\n        padding: 0;\n        margin: 0;\n      }\n      div[main-title] {\n        font-size: 12px;\n        width: 200px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    </style>\n    <app-header>\n      <app-toolbar>\n        <paper-fab\n          id=\"editbutton\"\n          icon=\"[[__editIcon]]\"\n          on-tap=\"_editButtonTap\"\n        ></paper-fab>\n        <paper-tooltip for=\"editbutton\" position=\"top\" offset=\"14\"\n          >[[__editText]]</paper-tooltip\n        >\n        <paper-icon-button\n          id=\"deletebutton\"\n          icon=\"icons:delete\"\n          on-tap=\"_deleteButtonTap\"\n        ></paper-icon-button>\n        <paper-tooltip for=\"deletebutton\" position=\"top\" offset=\"14\"\n          >delete</paper-tooltip\n        >\n        <div main-title>[[activeItem.title]]</div>\n        <paper-icon-button\n          id=\"addbutton\"\n          icon=\"icons:add\"\n          on-tap=\"_addButtonTap\"\n        ></paper-icon-button>\n        <paper-tooltip for=\"addbutton\" position=\"top\" offset=\"14\"\n          >add page</paper-tooltip\n        >\n        <paper-icon-button\n          id=\"outlinebutton\"\n          icon=\"icons:list\"\n          on-tap=\"_outlineButtonTap\"\n        ></paper-icon-button>\n        <paper-tooltip for=\"outlinebutton\" position=\"top\" offset=\"14\"\n          >site outline</paper-tooltip\n        >\n        <paper-icon-button\n          id=\"manifestbutton\"\n          icon=\"icons:settings\"\n          on-tap=\"_manifestButtonTap\"\n        ></paper-icon-button>\n        <paper-tooltip for=\"manifestbutton\" position=\"top\" offset=\"14\"\n          >site details</paper-tooltip\n        >\n      </app-toolbar>\n    </app-header>\n  "]);_templateObject_79aaaa50152211e9ab85edf03c468fa7=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_79aaaa50152211e9ab85edf03c468fa7()),is:"haxcms-site-editor-ui",properties:{activeItem:{type:Object,value:{},observer:"_activeItemChanged"},manifest:{type:Object,notify:!0},pageAllowed:{type:Boolean,value:!1,reflectToAttribute:!0},editMode:{type:Boolean,reflectToAttribute:!0,observer:"_editModeChanged",value:!1,notify:!0},manifestEditMode:{type:Boolean,reflectToAttribute:!0,observer:"_manifestEditModeChanged",value:!1,notify:!0}},_activeItemChanged:function _activeItemChanged(newValue){if(newValue.id){this.pageAllowed=!0}else{this.pageAllowed=!1}},_editButtonTap:function _editButtonTap(){this.editMode=!this.editMode},_addButtonTap:function _addButtonTap(){var form=document.createElement("eco-json-schema-object"),outline=window.JSONOutlineSchema.requestAvailability();form.schema=outline.getItemSchema("item");form.value=outline.getItemValues(null,this.activeItem);var evt=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!1,detail:{title:"Add a new page",elements:{content:form},invokedBy:this.$.addbutton,clone:!1}});window.dispatchEvent(evt)},_deleteButtonTap:function _deleteButtonTap(){var c=document.createElement("span");c.innerHTML="Page is removed from the outline but its content stays on the file system.";var evt=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!1,detail:{title:"Are you sure you want to delete this page?",elements:{content:c},invokedBy:this.$.deletebutton,clone:!1}});window.dispatchEvent(evt)},_outlineButtonTap:function _outlineButtonTap(){var c=document.createElement("haxcms-outline-editor-dialog");c.set("manifest",this.manifest);var evt=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!1,detail:{title:"Edit site outline",elements:{content:c},invokedBy:this.$.outlinebutton,clone:!1}});window.dispatchEvent(evt)},_manifestButtonTap:function _manifestButtonTap(){var c=document.createElement("haxcms-manifest-editor-dialog"),evt=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!1,detail:{title:"Edit site settings",elements:{content:c},invokedBy:this.$.manifestbutton,clone:!1}});window.dispatchEvent(evt)},_editModeChanged:function _editModeChanged(newValue){if(newValue){this.__editIcon="icons:save";this.__editText="Save"}else{this.__editIcon="editor:mode-edit";this.__editText="edit page"}this.fire("haxcms-edit-mode-changed",newValue);window.HaxStore.write("editMode",newValue,this)},_outlineEditModeChanged:function _outlineEditModeChanged(newValue){this.fire("haxcms-outline-edit-mode-changed",newValue)},_manifestEditModeChanged:function _manifestEditModeChanged(newValue){this.fire("haxcms-manifest-edit-mode-changed",newValue)}})});