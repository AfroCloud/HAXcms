<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../paper-button/paper-button.html">
<!--
`haxcms-manifest-editor-dialog`
Dialog for presenting an editable manifest of core settings

@demo demo/index.html

@microcopy - the mental model for this element

-->

<dom-module id="haxcms-manifest-editor-dialog">
  <template>
    <style>
      :host {
        display: block;
      }
      paper-dialog {
        width: 60%;
        min-height: 60%;
        top: 5%;
        border-radius: 16px;
      }
    </style>
    <paper-dialog id="editor" opened="{{opened}}" with-backdrop>
      <paper-dialog-scrollable>
        EDIT MANIFEST DETAILS HERE
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button id="save" dialog-confirm>Save</paper-button>
        <paper-button id="cancel" dialog-dismiss>Cancel</paper-button>
      </div>
    </paper-dialog>
  </template>
  <script>
    Polymer({
      is: 'haxcms-manifest-editor-dialog',
      listeners: {
        'save.tap': '_saveTap',
        'cancel.tap': '_cancelTap',
      },
      properties: {
        /**
         * opened state of the dialog inside here
         */
        opened: {
          type: Boolean,
          notify: true,
        },
        /**
         * JSON Outline Schema manifest data
         */
         manifest: {
           type: Object,
           notify: true,
         },
      },
      /**
       * Ready life cycle
       */
      ready: function () {
        document.body.addEventListener('json-outline-schema-changed', this._manifestChanged.bind(this));
        this.set('manifest', Polymer.cmsSiteEditor.jsonOutlineSchema);
      },
      /**
       * manifest changed
       */
      _manifestChanged: function (e) {
        if (typeof e.detail.id !== typeof undefined) {
          this.set('manifest', e.detail);
        }
      },
      /**
       * Save hit, send the message to push up the outline changes.
       */
      _saveTap: function (e) {
        this.fire('haxcms-save-manifest', this.manifest);
      },
    });
  </script>
</dom-module>