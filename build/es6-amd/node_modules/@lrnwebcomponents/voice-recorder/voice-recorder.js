define(["exports","meta","require","../../lit-element/lit-element.js","../../vmsg/vmsg.js"],(function(_exports,meta,_require,_litElement,_vmsg){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.VoiceRecorder=void 0,meta=babelHelpers.interopRequireWildcard(meta),_require=babelHelpers.interopRequireWildcard(_require);
/**
   * Copyright 2019 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class VoiceRecorder extends _litElement.LitElement{static get styles(){return[_litElement.css`
        :host {
          display: inline-flex;
        }
      `]}render(){return _litElement.html`
      <button @click="${this.recordState}">
        <iron-icon icon="${this.iconState}"></iron-icon>${this.textState}
      </button>
    `}static get properties(){return{iconState:{type:String},textState:{type:String},recording:{type:Boolean}}}static get tag(){return"voice-recorder"}constructor(){super(),this.recording=!1,new Promise((res,rej)=>_require.default(["../../@polymer/iron-icon/iron-icon.js"],res,rej)),new Promise((res,rej)=>_require.default(["../../@polymer/iron-icons/av-icons.js"],res,rej))}recordState(e){this.recording=!this.recording}firstUpdated(changedProperties){}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"recording"==propName&&(this[propName]?(this.textState="stop",this.iconState="av:stop"):(this.textState="Record",this.iconState="av:play-arrow"),this.toggleRecording(this[propName],oldValue))})}toggleRecording(newValue,oldValue){if(newValue){const basePath=this.pathFromUrl(decodeURIComponent(meta.url));(0,_vmsg.record)({wasmURL:basePath+"../../vmsg/vmsg.wasm"}).then(blob=>{console.log("Recorded MP3",blob),this.dispatchEvent(new CustomEvent("voice-recorder-recording",{value:blob}))})}}pathFromUrl(url){return url.substring(0,url.lastIndexOf("/")+1)}}_exports.VoiceRecorder=VoiceRecorder,customElements.define(VoiceRecorder.tag,VoiceRecorder)}));