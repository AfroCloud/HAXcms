define(["exports","../dynamic-import-registry/dynamic-import-registry.js"],function(_exports,_dynamicImportRegistry){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.WcAutoload=void 0;/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */ // register globally so we can make sure there is only one
window.WCAutoload=window.WCAutoload||{};// request if this exists. This helps invoke the element existing in the dom
// as well as that there is only one of them. That way we can ensure everything
// is rendered through the same modal
window.WCAutoload.requestAvailability=function(){if(!window.WCAutoload.instance){window.WCAutoload.instance=document.createElement("wc-autoload");document.body.appendChild(window.WCAutoload.instance)}return window.WCAutoload.instance};// forces self appending which kicks all this off but AFTER dom is loaded
window.addEventListener("load",function(e){// find the loader
var loader=window.WCAutoload.requestAvailability();// set the basePath if it exists
if(window.WCAutoloadBasePath){loader.registry.basePath=window.WCAutoloadBasePath}// build out the registry via events translated from object
if(window.WCAutoloadRegistry){for(var i in window.WCAutoloadRegistry){loader.registry.register({tag:i,path:window.WCAutoloadRegistry[i]})}}// mutation observer will pick up changes after initial load
// but this gets us at load time
document.querySelectorAll(":not(:defined)").forEach(function(el,index){// process every tag NOT defined when the page loads
loader.processNewElement(el)})});/**
 * `wc-autoload`
 * `automatically load new tags in the dom`
 * @demo demo/index.html
 * @element wc-autoload
 */var WcAutoload=/*#__PURE__*/function(_HTMLElement){babelHelpers.inherits(WcAutoload,_HTMLElement);babelHelpers.createClass(WcAutoload,null,[{key:"tag",/**
   * This is a convention, not the standard
   */get:function get(){return"wc-autoload"}}]);function WcAutoload(){var _this;babelHelpers.classCallCheck(this,WcAutoload);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(WcAutoload).call(this));_this.registry=window.DynamicImportRegistry.requestAvailability();return _this}babelHelpers.createClass(WcAutoload,[{key:"connectedCallback",value:function connectedCallback(){var _this2=this;// listen for changes and then process any new node that has a tag name
this._mutationObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){mutation.addedNodes.forEach(function(node){if(node.tagName){_this2.processNewElement(node)}})})});// listen on the body and deep children as well
this._mutationObserver.observe(document.querySelector("body"),{childList:!0,subtree:!0})}},{key:"disconnectedCallback",value:function disconnectedCallback(){this._mutationObserver.disconnect()}/**
   * Process new elements
   */},{key:"processNewElement",value:function processNewElement(node){this.registry.loadDefinition(node.tagName)}}]);return WcAutoload}(babelHelpers.wrapNativeSuper(HTMLElement));_exports.WcAutoload=WcAutoload;window.customElements.define(WcAutoload.tag,WcAutoload)});